<!doctype html>
<html lang="en">
<head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <meta name="author" content="Maasq" />
   <meta name="description" content="A suite of tools for creating and managing information to be imported to Fantasy Grounds VTT." />
   <meta name="version" content="0.01.35" />
   <meta name="date" content="2025-11-16" />

   <title>Engineer Suite Index</title>
   
   <link rel="preconnect" href="https://fonts.googleapis.com" />
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
   <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;700&display=swap" rel="stylesheet" />
   <link href="https://fonts.googleapis.com/css2?family=Cormorant+SC:wght@400;500;700&display=swap" rel="stylesheet" />

   <script src="https://cdn.tailwindcss.com"></script>
   <script src="libs/dexie.js"></script>
   <script src="background.js" defer></script>
   
   <style>
      @font-face {
         font-family: 'Chancery';
         src: url('fonts/chancery.ttf') format('truetype');
      }

      .custom-shadow {
         box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.4);
      }
      body {
         font-family: "Lexend", sans-serif;
         background-color: #f0f0f0; /* Light gray background */
         margin: 0;
         padding: 0;
      }
      .title-text {
         font-family: 'Chancery', sans-serif;
         color: #6F1FF8;
         text-shadow: -1px -1px 2px rgba(255, 255, 255, 0.5), 
                      2px 2px 4px rgba(0, 0, 0, 0.4);       
      }

      .btn-primary {
         display: inline-block;
         font-weight: 600;
         font-size: 0.875rem;
         padding: 0.25rem 1rem;
         border-radius: 0.375rem;
         transition: opacity 0.15s ease-in-out, box-shadow 0.3s ease;
         box-shadow:
            inset 0 1px 0 rgba(255, 255, 255, 0.4),
            3px 3px 6px rgba(0, 0, 0, 0.5);
         cursor: pointer;
         position: relative;
         overflow: hidden;
         background: linear-gradient(to bottom, #A78BFA 0%, #5B21B6 100%);
         color: black;
         border: 1px solid #4C1D95;
      }
      .btn-primary::before {
         content: "";
         position: absolute;
         top: 0; left: 0;
         width: 100%; height: 50%;
         background: linear-gradient(to bottom, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0));
         border-top-left-radius: 0.375rem;
         border-top-right-radius: 0.375rem;
         pointer-events: none;
      }
      .btn-primary::after {
         content: "";
         position: absolute;
         top: 0; left: -75%;
         width: 50%; height: 100%;
         background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.3), transparent);
         transform: skewX(-20deg);
         pointer-events: none;
      }
      .btn-primary:hover::after {
         left: 125%;
         transition: left 0.5s ease-in-out;
      }
      .btn-primary:hover {
         opacity: 0.8;
      }
      .btn-primary:disabled {
         opacity: 0.5;
         cursor: not-allowed;
      }

      .entry-title {
         font-family: 'Chancery';
         font-size: 20pt;
      }
      .entry-title-npc {
         color: #87CC24;
      }

      .card-body { 
         max-height: 0;
         overflow: hidden;
         transition: max-height 0.3s ease-in-out, padding 0.3s ease-in-out;
         padding-top: 0;
         padding-bottom: 0;
      }
      .card-body.open { 
         max-height: 70rem; 
         padding-top: 1rem; 
         padding-bottom: 1rem; 
      }
      .card-font-style { 
         font-size: 11pt;
      }

      /* --- New Section Heading Style --- */
      .section-heading {
         font-family: 'Cormorant SC', serif;
         font-size: 24pt;
         color: #4C1D95; /* Deep purple */
         text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
         font-weight: bold;
      }
      
      .page-background-svg path {
      fill: #4C1D95;
   }

   </style>
   
</head>

<body>
   <header class="sticky top-0 z-50 pt-1 pb-12">
      <div class="relative h-32 max-w-screen-2xl mx-auto px-6">
         <div
            class="absolute bg-black rounded-full custom-shadow z-10 left-1/2 -translate-x-1/2"
            style="top: 0px; width: 200px; height: 200px;"></div>

         <div
            id="logo-container"
            class="absolute rounded-full z-30 cursor-pointer left-1/2 -translate-x-1/2"
            style="top: 0px; width: 200px; height: 200px;">
            <img
               src="graphics/engineer suite.webp"
               alt="Engineer Suite Logo"
               class="block w-full h-full"
               onerror="this.onerror=null;this.src='https://placehold.co/200x200/000000/38bdf8?text=Logo';this.alt='Placeholder Logo';" />
         </div>

         <div
            class="absolute left-0 right-0 h-[50px] bg-gradient-to-b from-black via-gray-500 to-black border border-black rounded-xl custom-shadow z-20 flex justify-between px-4"
            style="top: 75px;">
            <h1 class="title-text ml-1" style="font-size: 40pt;line-height: 0.8; margin-top: -28pt;">
               <span class="float-left mr-2" style="font-size: 83pt; line-height: 0.8; margin-top: 0pt;">E</span>ngineer suite
            </h1>

            <div></div>
         </div>
      </div>
      
   </header>

   <main class="max-w-screen-2xl mx-auto px-6 py-8">
      
      <div class="-mt-20 mb-20">
         <p class="text-right text-sm text-gray-700">
            &copy; Maasq 2025
         </p>
      </div>
      
      <div id="info-card-container" class="md:col-span-2 mb-8 hidden">
         <div id="info-card" class="bg-white rounded-xl custom-shadow bordered-container card-font-style p-6 w-full">
            <div id="info-card-header" class="flex justify-between items-center mb-4 cursor-pointer">
               <h3 class="text-lg font-bold text-slate-700">Important: How Your Data is Saved</h3>
               <svg id="info-card-chevron" class="w-5 h-5 text-slate-700 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </div>
            <div id="info-card-body" class="card-body space-y-3 text-sm">
               <p>Welcome to Engineer Suite! Bestiaries, grimores, catalogues and all the individual entries in each are saved automatically using your web browser's internal storage (IndexedDB). This makes working on your project very easy.</p>
               <p><strong>Please understand these limitations:</strong></p>
               <ul class="list-disc list-inside space-y-1 pl-2">
                  <li>Data is stored <strong>only within this specific browser</strong> on <strong>this</strong> computer. It cannot be accessed from other browsers or other computers unless you export the database (all files), bestiary/grimoire/catalogue, or individual entries first.</li>
                  <li>Aggressive browser cleaning settings or tools that clear "site data" or "cache" <strong>can permanently delete</strong> your saved bestiaries.</li>
                  <li>There is <strong>no automatic cloud backup</strong>.</li>
               </ul>
               <p class="font-semibold text-red-700">⚠️ It is strongly recommended that you regularly use the 'Export' feature in each tool to save a JSON backup file to your computer.</p>
               <p>This backup file is the <strong>only way</strong> to:</p>
               <ul class="list-disc list-inside space-y-1 pl-2">
                  <li>Recover your data if your browser storage is cleared.</li>
                  <li>Transfer your bestiaries between different browsers or computers.</li>
                  <li>Share your work with others.</li>
               </ul>
            </div>
            
            <div class="flex items-center justify-end mt-4">
               <label for="dont-show-again" class="flex items-center text-sm text-gray-600 cursor-pointer">
                  <input type="checkbox" id="dont-show-again" class="mr-2 h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                  Do not show this again
               </label>
            </div>

         </div>
      </div>

      <h2 class="section-heading text-center">Dungeons &amp; Dragons 5E 2014 (Legacy)</h2>
      
      <div class="w-4/5 mx-auto flex items-center -mt-12 mb-4 justify-center">
      <img 
         src="graphics/dragon left.svg" 
         alt="" 
         class="h-16 flex-shrink-0">

      <div class="relative top-3 flex-grow h-0.5 bg-black min-w-[100px] max-w-[600px]"></div>

      <img 
         src="graphics/dragon right.svg" 
         alt="" 
         class="h-16 flex-shrink-0">
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-14">
         
         <div class="mb-8">
            <div class="relative h-32">
               <div class="absolute w-32 h-32 bg-black rounded-full custom-shadow z-10 top-0 left-4"></div>
               <div class="absolute w-32 h-32 rounded-full z-30 cursor-pointer top-0 left-4">
                  <img src="graphics/npc engineer.webp" alt="NPC Engineer Logo" class="block w-full h-full" onerror="this.onerror=null;this.src='https://placehold.co/128x128/000000/87CC24?text=Logo';this.alt='Placeholder Logo';">
               </div>
               <div class="absolute h-[40px] bg-gradient-to-b from-black via-gray-500 to-black border border-black rounded-xl custom-shadow z-20 flex items-center top-8 left-0 right-4">
                  <h3 class="entry-title entry-title-npc font-bold ml-40">npc Engineer 2014</h3>
               </div>
            </div>
            <div class="flex justify-end pr-4 -mt-12">
               <a href="npcengineer/npc engineer.html" class="btn-primary">
                  Launch NPC Engineer
               </a>
            </div>
         </div>
         <div></div>
         <div></div>
         <div></div>
      </div>

      <h2 class="section-heading text-center">Dungeons &amp; Dragons 5E 2024</h2>
            
      <div class="w-4/5 mx-auto flex items-center -mt-12 mb-4 justify-center">
      <img 
         src="graphics/dragon left.svg" 
         alt="" 
         class="h-16 flex-shrink-0">

      <div class="relative top-3 flex-grow h-0.5 bg-black min-w-[100px] max-w-[600px]"></div>

      <img 
         src="graphics/dragon right.svg" 
         alt="" 
         class="h-16 flex-shrink-0">
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-14">
         
         <div class="mb-8 opacity-30 pointer-events-none">
            <div class="relative h-32">
               <div class="absolute w-32 h-32 bg-black rounded-full custom-shadow z-10 top-0 left-4"></div>
               <div class="absolute w-32 h-32 rounded-full z-30 cursor-pointer top-0 left-4">
                  <img src="graphics/npc engineer.webp" alt="NPC Engineer Logo" class="block w-full h-full" onerror="this.onerror=null;this.src='httpsS://placehold.co/128x128/000000/87CC24?text=Logo';this.alt='Placeholder Logo';">
               </div>
               <div class="absolute h-[40px] bg-gradient-to-b from-black via-gray-500 to-black border border-black rounded-xl custom-shadow z-20 flex items-center top-8 left-0 right-4">
                  <h3 class="entry-title entry-title-npc font-bold ml-40">npc Engineer 2024</h3>
               </div>
            </div>
            <div class="flex justify-end pr-4 -mt-12">
               <a href="" class="btn-primary">
                  Coming Soon!
               </a>
            </div>
         </div>
         <div></div>
         <div></div>
         <div></div>
      </div>

      <h2 class="section-heading text-center mb-6">Other Game Systems</h2>
            
      <div class="w-4/5 mx-auto flex items-center -mt-12 mb-4 justify-center">
      <img 
         src="graphics/dragon left.svg" 
         alt="" 
         class="h-16 flex-shrink-0">

      <div class="relative top-3 flex-grow h-0.5 bg-black min-w-[100px] max-w-[600px]"></div>

      <img 
         src="graphics/dragon right.svg" 
         alt="" 
         class="h-16 flex-shrink-0">
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-14">

      </div>
      <div></div>
      <div></div>
      <div></div>
   </main>

   <script>
      // Make the listener async to use await
      document.addEventListener('DOMContentLoaded', async (event) => {
         
         // --- Dexie DB Setup ---
         try {
            const db = new Dexie('engineerSuiteSettings');
            // Use '&key' to make 'key' the primary, unique index
            db.version(1).stores({
               settings: '&key, value'
            });

            // --- Get All Elements ---
            // Collapsible card elements
            const infoCardHeader = document.getElementById('info-card-header');
            const infoCardBody = document.getElementById('info-card-body');
            const infoCardChevron = document.getElementById('info-card-chevron');
            // Persistence elements
            const infoCardContainer = document.getElementById('info-card-container');
            const dontShowCheckbox = document.getElementById('dont-show-again');

            // --- Collapsible Card Logic (Existing) ---
            if (infoCardHeader && infoCardBody && infoCardChevron) {
               // Start open
               infoCardBody.classList.add('open');
               infoCardChevron.style.transform = 'rotate(180deg)';

               // Toggle on click
               infoCardHeader.addEventListener('click', () => {
                  infoCardBody.classList.toggle('open');
                  if (infoCardBody.classList.contains('open')) {
                     infoCardChevron.style.transform = 'rotate(180deg)';
                  } else {
                     infoCardChevron.style.transform = 'rotate(0deg)';
                  }
               });
            }

            // --- NEW: Persistence Logic ---
            if (infoCardContainer && dontShowCheckbox) {
               // 1. Check the database on load
               const setting = await db.settings.get('showInfoCard');
               
               // Show if setting is missing (first visit) or explicitly true
               const shouldShow = (setting === undefined) || (setting.value === true);

               if (shouldShow) {
                  infoCardContainer.classList.remove('hidden');
               } else {
                  // Sync checkbox if card is hidden
                  dontShowCheckbox.checked = true;
               }

               // 2. Add listener to save changes
               dontShowCheckbox.addEventListener('change', async () => {
                  // If checked, we DON'T show (value: false)
                  const showValue = !dontShowCheckbox.checked;
                  await db.settings.put({ key: 'showInfoCard', value: showValue });
               });
            }
         } catch (e) {
            console.error("Failed to initialize Dexie DB. Did the script load?", e);
         }
      });
   </script>
</body>
</html>